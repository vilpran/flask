{% extends "home.html" %}{% block title %}Login{% endblock %} {% block content %}
    <form method="POST">
      <h3 align="center">Prisijungti</h3>
      <div class="form-group">
        <label for="email">el. paštas</label>
        <input
          type="email"
          class="form-control"
          id="email"
          name="email"
          placeholder="Enter email"
        />
      </div>
      <div class="form-group">
        <label for="password">slaptažodis</label>
        <input
          type="password"
          class="form-control"
          id="password"
          name="password"
          placeholder="Enter password"
        />
      </div>
      <br />
      <button type="submit" class="btn btn-primary">Prisijungti</button>
    </form>

    <script>

    //import crypto from "crypto";

    // function check_info(){

    //     const email = document.getElementById("email").value;
    //     const password = document.getElementById("password").value;

    //     // Compute SHA-256 hash of the password
    //     const encoder = new TextEncoder();
    //     const dataBuffer = encoder.encode(password);

    //     return window.crypto.subtle.digest('SHA-256', dataBuffer)

    //     .then(buffer => {
    //         const hashArray = Array.from(new Uint8Array(buffer));
    //         const hashHex = hashArray.map(byte => byte.toString(16).padStart(2, '0')).join('');
        
    //         return db.query("SELECT * FROM User WHERE email = ? AND password = ?", [email, hashHex]);
    //     })
  
    //     .then(result => {
    //       if (result.length > 0) {
    //       // User credentials are valid, redirect to products.html
    //       redirectToMainPage();
    //       } 
    //       else {
    //         // User credentials are invalid
    //         alert("Invalid email or password");
    //       }
    //     })
    //     .catch(error => {
    //         console.error("Error occurred during login:", error);
    //     });

    // }
      //   .then(user => {
      //   if (user) {
      //     // User credentials are valid, redirect to products.html
      //     redirectToMainPage();
      //   } else {
      //     // User credentials are invalid
      //     alert("Invalid email or password");
      //   }
      // })
      // .catch(error => {
      //   console.error(error);
      // });
    

    
        // Query the database to check if the email and hashed password match
        // const user = db.query("SELECT * FROM User WHERE email = ? AND password = ?", [email, hashHex]);

         //const hash = crypto.createHash("sha256").update(password).digest("hex");
        
         //const hash = CryptoJS.SHA256(password).toString();

         //alert()
         // Query the database to check if the email and password match
         //const user = db.query("SELECT * FROM User WHERE email = ? AND password = ?", [email, password]);

        //  if (user) {
        //    // User credentials are valid, redirect to products.html
        //    redirectToMainPage();
        //  } else {
        //    // User credentials are invalid
        //    alert("Invalid email or password");
        //  }

    // function redirectToMainPage() {
    //   location.href = "/";
    // }
    
  </script>
  
    {% endblock %}